{% extends "base.html" %}

{% block title %}Booking Confirmed - Movie Reservation System{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-8 col-lg-6">
        <div class="text-center mb-4">
            <div class="success-animation">
                <i class="fas fa-check-circle fa-5x text-success mb-3"></i>
            </div>
            <h2 class="fw-bold text-success">Booking Confirmed!</h2>
            <p class="text-muted">Your tickets have been successfully booked.</p>
        </div>
        
        <div class="card bg-dark border-success">
            <div class="card-header bg-success text-white">
                <h5 class="mb-0"><i class="fas fa-ticket-alt me-2"></i>Booking Details</h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-4 text-center mb-3 mb-md-0">
                        <img src="{{ booking.poster_url if booking.poster_url and booking.poster_url != 'N/A' else url_for('static', filename='images/no-poster.png') }}" 
                             class="img-fluid rounded shadow" 
                             alt="{{ booking.title }}"
                             style="max-height: 200px;"
                             onerror="this.src='https://via.placeholder.com/150x225/1a1a1a/666666?text=No+Poster'">
                    </div>
                    <div class="col-md-8">
                        <table class="table table-dark table-borderless mb-0">
                            <tr>
                                <td class="text-muted"><i class="fas fa-hashtag me-2"></i>Booking ID</td>
                                <td class="fw-bold text-warning">{{ booking.booking_id }}</td>
                            </tr>
                            <tr>
                                <td class="text-muted"><i class="fas fa-film me-2"></i>Movie</td>
                                <td class="fw-bold">{{ booking.title }}</td>
                            </tr>
                            <tr>
                                <td class="text-muted"><i class="fas fa-calendar me-2"></i>Year</td>
                                <td>{{ booking.release_year }}</td>
                            </tr>
                            <tr>
                                <td class="text-muted"><i class="fas fa-clock me-2"></i>Showtime</td>
                                <td>{{ booking.showtime }}</td>
                            </tr>
                            <tr>
                                <td class="text-muted"><i class="fas fa-chair me-2"></i>Seats</td>
                                <td>
                                    {% for seat in booking.seats.split(',') %}
                                    <span class="badge bg-danger me-1">{{ seat.strip() }}</span>
                                    {% endfor %}
                                </td>
                            </tr>
                            <tr>
                                <td class="text-muted"><i class="fas fa-user me-2"></i>Booked By</td>
                                <td>{{ booking.first_name }} {{ booking.last_name }}</td>
                            </tr>
                            <tr>
                                <td class="text-muted"><i class="fas fa-envelope me-2"></i>Email</td>
                                <td>{{ booking.email }}</td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
            <div class="card-footer bg-dark border-success">
                <div class="d-flex align-items-center text-muted">
                    <i class="fas fa-info-circle me-2"></i>
                    <small>Please save your Booking ID. You'll need it to cancel your booking.</small>
                </div>
            </div>
        </div>
        
        <div class="alert alert-info mt-4">
            <i class="fas fa-envelope me-2"></i>
            A confirmation email has been sent to <strong>{{ booking.email }}</strong>
        </div>
        
        <div class="d-flex gap-3 justify-content-center mt-4">
            <a href="{{ url_for('index') }}" class="btn btn-danger btn-lg">
                <i class="fas fa-home me-2"></i>Back to Home
            </a>
            <a href="{{ url_for('my_bookings') }}" class="btn btn-outline-light btn-lg">
                <i class="fas fa-ticket-alt me-2"></i>View My Bookings
            </a>
        </div>
    </div>
</div>
{% endblock %}
